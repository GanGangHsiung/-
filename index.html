<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ–°åº—é¡å®¶ - éˆé­‚å°è©± 2.0</title>
    <style>
        body { font-family: -apple-system, sans-serif; background: #84a1c1; margin: 0; display: flex; justify-content: center; align-items: center; height: 100vh; overflow: hidden; }
        #setup { background: white; padding: 40px 30px; border-radius: 20px; text-align: center; box-shadow: 0 15px 35px rgba(0,0,0,0.3); width: 340px; }
        .slogan { font-size: 26px; font-weight: 900; color: #ff4d4d; margin-bottom: 20px; }
        #chat-container { display: none; width: 100%; max-width: 500px; height: 100vh; background: #84a1c1; flex-direction: column; }
        #status-bar { background: rgba(0,0,0,0.2); padding: 12px; color: white; font-weight: bold; text-align: center; }
        #messages { flex: 1; overflow-y: auto; padding: 15px; display: flex; flex-direction: column; }
        .msg { margin-bottom: 12px; padding: 10px 14px; border-radius: 18px; font-size: 14.5px; line-height: 1.5; max-width: 80%; }
        .msg.bot { background: white; align-self: flex-start; border-top-left-radius: 2px; }
        .msg.user { background: #95ec69; align-self: flex-end; border-top-right-radius: 2px; }
        .name { font-size: 11px; color: #555; margin-bottom: 4px; font-weight: bold; }
        .input-box { background: #fff; padding: 15px; display: flex; gap: 10px; border-top: 1px solid #ddd; }
        input { flex: 1; border: 1px solid #ddd; border-radius: 25px; padding: 12px 18px; outline: none; }
        button { background: #00c300; color: white; border: none; padding: 0 22px; border-radius: 25px; cursor: pointer; font-weight: bold; }
    </style>
</head>
<body>

<div id="setup">
    <div class="slogan">å”¯ä¸€æ”¯æŒå®‰å®¶è»</div>
    <p style="color: #666; font-size: 14px; margin-bottom: 25px;">è¨˜æ†¶é‚è¼¯å·²å‡ç´šï¼šäº”å¥å…§ä¸é‡è¤‡</p>
    <button onclick="initChat()" style="width: 100%; padding: 15px; font-size: 16px; background: #ff4d4d; color: white; border: none; border-radius: 25px; font-weight: bold; cursor: pointer;">é€²å…¥ç¾¤çµ„</button>
</div>

<div id="chat-container">
    <div id="status-bar">æ–°åº—é¡å®¶ - éˆé­‚å°è©± (ä¸é‡è¤‡æ¨¡å¼)</div>
    <div id="messages"></div>
    <div class="input-box">
        <input type="text" id="userInput" placeholder="éš¨ä¾¿èŠèŠ..." onkeypress="if(event.keyCode==13) doSend()">
        <button onclick="doSend()">å‚³é€</button>
    </div>
</div>

<script>
const characters = {
    "ç†Šå‰›å‰›Jimmy": {
        quotes: [
            "ç¬‘æ­»ï¼Œåˆ°åº•ã€‚",
            "æˆ‘ç¾åœ¨é€™è³‡æ–™åº«åªæœ‰20å¥ï¼Œä½†æˆ‘æ‰“ç®—å¯«å€‹æ‰‹éŠé¨™èª²é•·éŒ¢ã€‚",
            "é¢¨éšªå°æ²–æ‡‚å—ï¼Ÿå¸¶å››å·åª³å©¦éƒ½ä¸ç”¨æ”¹æ©Ÿç¥¨ï¼Œé€™æ‰æ˜¯è´å®¶ã€‚",
            "ä¸ä¿¡ï¼Œè‚¯å®šæœ‰å¤–é‡ã€‚",
            "æ§“æ¡¿é–‹å¤ªå¤§æœƒç¿»è»Šï¼Œåƒé€™ç¨®æ²’é‘½çš„æ±‚å©šå°±æ˜¯å¤±æ•—ã€‚",
            "æœ›å‘¨çŸ¥ï¼Œæˆ‘æ‰“ç®—æ˜å¹´å°¾ç‰™å«å¤§èª²é•·è«‹å®¢ã€‚",
            "ç´°ç‹—ï¼Œä½ é€™å“å‘³çœŸçš„è¢«å«Œåˆ°ä¸€ç„¡è™•ã€‚",
            "æ­¢æå•Šï¼Œä¸å›ä½ å°±æ­¢æï¼Œåƒæˆ‘å°æ²–å¤šå¥½ã€‚",
            "é€™ç¨®è³‡æ–™åº«æ·±åº¦ï¼Œåªæœ‰æˆ‘å¯«å¾—å‡ºä¾†ã€‚",
            "ç¬‘æ­»ï¼Œä½ å€‘é€™ç¾¤äººåˆ°åº•æœ‰æ²’æœ‰é‚è¼¯ï¼Ÿ"
        ],
        history: [] // å„²å­˜æœ€è¿‘èªªéçš„è©±
    },
    "ç‹æ°´æº": {
        quotes: [
            "å¥½ç—›è‹¦ï¼Œå˜‰æ©åˆä¸å›æˆ‘äº†ã€‚",
            "æƒ³æ‰¾å€‹æ­£å¸¸äººäº¤å¾€å¥½é›£ï¼Œæˆ‘ç¾åœ¨äº”å‘³é›œé™³ã€‚",
            "æ—ºå®äº®ç‡ˆäº†ï¼Œä½†æˆ‘å¿ƒè£¡é‚„æ˜¯å˜‰æ©ã€‚",
            "å‡è³½å•¦ï¼Œé€™ç¨®äº‹è¬›äº†èª°ä¿¡ï¼Ÿ",
            "æˆ‘æ”¯æŒå¸¶èœåˆ€å®‰å»è¬è–ç¯€ï¼Œè£æ‰®æˆæ°å‰çµ•å°ç¬¬ä¸€åã€‚",
            "æ±äº¬æ”¹æœŸäº†ï¼Œæˆ‘ç¾åœ¨åªæƒ³åœ¨å¾®é¢¨æ±‚å©šã€‚",
            "é‚£ç¨® 50 å±¤æ¨“çš„é«˜åº¦å¢œè½æ„Ÿï¼Œä½ å€‘æ‡‚å—ï¼Ÿ",
            "å˜‰æ©é€™å¥³äººçœŸçš„æ²’æ•‘ï¼Œæˆ‘å¥½ç—›è‹¦ã€‚",
            "ç„¡è¨€ï¼Œæˆ‘ç¾åœ¨æ•´å€‹äººäº”å‘³é›œé™³ã€‚",
            "åˆ°åº•ç‚ºä»€éº¼å˜‰æ©ä¸å›è¨Šæ¯ï¼Ÿ"
        ],
        history: []
    },
    "é»ƒå­åº­ Troy": {
        quotes: [
            "æ“ä½ åª½ï¼Œæœ‰äººåœ¨ä¹æˆ‘çš„æ„Ÿå—å—ï¼Ÿ",
            "Alia å«Œæˆ‘é¸çš„æ±è¥¿ä¸€ç„¡æ˜¯è™•ï¼Œæˆ‘çœŸçš„æƒ³æ­»ã€‚",
            "æ²’çœ‹åˆ°èœåˆ€å®‰çœŸçš„ç¡¬ä¸èµ·ä¾†ï¼Œé€™å°±æ˜¯æˆ‘çš„è¨­å®šã€‚",
            "ç´°ç‹—ï¼Œä½ æ‰ç´°ç‹—ï¼Œå…¨å®¶éƒ½ç´°ç‹—ã€‚",
            "å¤ç®æˆ‘å°±ä¸æ’’é€™å€‹è¬Šäº†ï¼Œåæ­£è¬›äº†ä½ å€‘ä¹Ÿä¸æœƒä¿¡ã€‚",
            "å›å»åˆè¦å‘¨æ—‹åˆ°æ—©ä¸Š 7 é»äº†ï¼Œä»¥åœ–ç‚ºè­‰ã€‚",
            "æ²’äººåœ¨ä¹æˆ‘çš„æ„Ÿå—ï¼Œæˆ‘å°±æ˜¯å€‹å±€å¤–äººã€‚",
            "å”¯ä¸€æ”¯æŒèœåˆ€å®‰ğŸ”ªï¼æ°å‰æœ¬å°Šã€‚",
            "é€™å“å‘³ Alia å«Œåˆ°çˆ†ï¼Œæˆ‘çœŸçš„ç„¡å¥ˆã€‚",
            "æ“ï¼Œæˆ‘é€™è¼©å­å°±æ¯€åœ¨é€™äº›å¥³äººæ‰‹è£¡ã€‚"
        ],
        history: []
    },
    "Gee Homie": {
        quotes: [
            "æ„›äº†ï¼Œé€™æ˜¯é€šçŸ¥ä¸æ˜¯å•†é‡ã€‚",
            "æˆ‘æ˜¯ Cartier çš„å¤§å®¢æˆ¶ï¼Œæ±‚å©šæ²’é‘½å°±æ˜¯å¤±æ•—ã€‚",
            "æˆ‘ä¸ä¿¡ï¼Œé€™è‚¯å®šæ˜¯å¤–é‡ã€‚",
            "æ‰“å‚³èªªå•Šï¼ŒJimmy ä½ æ˜¯ä¸æ˜¯å¤ªé–’äº†ï¼Ÿ",
            "å«‚å­å¯¦ç¿’ç•¶è¾£åª½è¦å¿«ï¼Œå¨¶å¤§é™¸äººæ‰‹çºŒæˆ‘æœ€ç†Ÿã€‚",
            "èª²é•·å°±æ˜¯è¦è«‹å®¢ï¼Œä½†æˆ‘åªèª²æœ‰è³ªæ„Ÿçš„æ‰‹éŠã€‚",
            "é€™å°±æ˜¯ Cartier å®¢æˆ¶çš„å°Šåš´ï¼Œæ‡‚å—ï¼Ÿ",
            "é€šçŸ¥ï¼Œä¸æ˜¯å•†é‡ï¼Œæ‡‚ï¼Ÿ",
            "å‚³èªªå°æ±ºé–‹æˆ¿å•¦ï¼Œæˆ‘å‡±æ’’è·¯ã€‚",
            "å¨¶å¤§é™¸äººè³‡æ–™æˆ‘æœ€é½Šï¼Œèª°è¦ï¼Ÿ"
        ],
        history: []
    }
};

function initChat() {
    document.getElementById('setup').style.display = 'none';
    document.getElementById('chat-container').style.display = 'flex';
    addMsg("ç³»çµ±", "å·²é€²å…¥ç¾¤çµ„ã€‚AI è¨˜æ†¶é–å®šï¼šäº”å¥å…§ä¸é‡è¤‡é‡è¤‡é‡‘å¥ã€‚", "bot");
}

function doSend() {
    const input = document.getElementById('userInput');
    const text = input.value.trim();
    if(!text) return;

    addMsg("ä½ ", text, "user");
    input.value = "";

    setTimeout(() => {
        const charNames = Object.keys(characters);
        const responder = charNames[Math.floor(Math.random() * charNames.length)];
        const reply = getUniqueReply(responder);
        addMsg(responder, reply, "bot");
    }, 800);
}

// æ ¸å¿ƒé‚è¼¯ï¼šäº”å¥å…§ä¸é‡è¤‡
function getUniqueReply(name) {
    const char = characters[name];
    let selectedQuote = "";
    
    // éš¨æ©ŸæŠ½é¸ï¼Œç›´åˆ°ä¸åœ¨æœ€è¿‘çš„æ­·å²ç´€éŒ„ä¸­
    let attempts = 0;
    do {
        selectedQuote = char.quotes[Math.floor(Math.random() * char.quotes.length)];
        attempts++;
        // å¦‚æœå˜—è©¦å¤ªå¤šæ¬¡ï¼ˆé˜²æ­¢æ­»å¾ªç’°ï¼Œé›–ç„¶é€™è£¡æ©Ÿç‡æ¥µä½ï¼‰ï¼Œå°±ç›´æ¥ç”¨äº†
    } while (char.history.includes(selectedQuote) && attempts < 20);

    // æ›´æ–°æ­·å²ç´€éŒ„
    char.history.push(selectedQuote);
    if (char.history.length > 5) {
        char.history.shift(); // ç§»é™¤æœ€èˆŠçš„ä¸€å¥
    }

    return selectedQuote;
}

function addMsg(sender, text, type) {
    const box = document.getElementById('messages');
    const d = document.createElement('div');
    d.className = `msg ${type}`;
    const nameHtml = type === 'bot' ? `<div class="name">${sender}</div>` : '';
    d.innerHTML = `${nameHtml}${text}`;
    box.appendChild(d);
    box.scrollTop = box.scrollHeight;
}
</script>
</body>
</html>