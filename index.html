<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ–°åº—é¡å®¶ - æ¨¡æ“¬èŠå¤©ç¾¤çµ„</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; background: #84a1c1; margin: 0; display: flex; justify-content: center; align-items: center; height: 100vh; }
        #setup { background: white; padding: 30px; border-radius: 15px; text-align: center; box-shadow: 0 10px 25px rgba(0,0,0,0.2); }
        #chat-container { display: none; width: 100%; max-width: 450px; height: 90vh; background: #84a1c1; flex-direction: column; }
        #status-bar { background: rgba(0,0,0,0.1); padding: 5px 15px; font-size: 12px; color: white; }
        #messages { flex: 1; overflow-y: auto; padding: 15px; display: flex; flex-direction: column; }
        .msg { margin-bottom: 12px; padding: 8px 12px; border-radius: 15px; font-size: 14px; line-height: 1.4; max-width: 75%; position: relative; }
        .msg.bot { background: white; align-self: flex-start; border-top-left-radius: 2px; }
        .msg.user { background: #95ec69; align-self: flex-end; border-top-right-radius: 2px; }
        .name { font-size: 11px; color: #555; margin-bottom: 3px; font-weight: bold; }
        .input-box { background: #fff; padding: 10px; display: flex; gap: 10px; border-top: 1px solid #ddd; }
        input { flex: 1; border: 1px solid #ddd; border-radius: 20px; padding: 8px 15px; outline: none; }
        button { background: #00c300; color: white; border: none; padding: 8px 20px; border-radius: 20px; cursor: pointer; }
        select { padding: 8px; border-radius: 5px; margin: 10px 0; width: 100%; }
    </style>
</head>
<body>

<div id="setup">
    <h2>æ–°åº—é¡å®¶ æ¨¡æ“¬å™¨</h2>
    <p>è«‹é¸æ“‡èŠå¤©æ¨¡å¼ï¼š</p>
    <select id="mode">
        <option value="group">å…¨é«”ç¾¤çµ„ (éš¨æ©Ÿå›è¦†)</option>
        <option value="single_ç†Šå‰›å‰›Jimmy">å–®æŒ‘ï¼šç†Šå‰›å‰›Jimmy</option>
        <option value="single_ç‹æ°´æº">å–®æŒ‘ï¼šç‹æ°´æº</option>
        <option value="single_é»ƒå­åº­ Troy">å–®æŒ‘ï¼šé»ƒå­åº­ Troy</option>
        <option value="single_Gee Homie">å–®æŒ‘ï¼šGee Homie</option>
    </select>
    <br>
    <button onclick="initChat()">é€²å…¥ç¾¤çµ„</button>
</div>

<div id="chat-container">
    <div id="status-bar">æ–°åº—é¡å®¶ (4)</div>
    <div id="messages"></div>
    <div class="input-box">
        <input type="text" id="userInput" placeholder="è¼¸å…¥è¨Šæ¯..." onkeypress="if(event.keyCode==13) doSend()">
        <button onclick="doSend()">å‚³é€</button>
    </div>
</div>

<script>
const friends = {
    "ç†Šå‰›å‰›Jimmy": {
        fallbacks: ["ç¬‘æ­»", "å°Šéƒ½å‡å˜Ÿ", "æˆ‘ä¸ä¿¡", "ç‰›é€¼", "å¥½æ‰¯"],
        keywords: {
            "åˆ†æ‰‹": "é¢¨éšªå°æ²–åŠ æ§“æ¡¿çš„æ¦‚å¿µï¼ŒçœŸçš„",
            "åŠ ç­": "æˆ‘ä¹Ÿæ˜¯å¯ä»¥è€å¤§ç‰Œç›´æ¥èµ°äººå•¦",
            "ç¡": "å¤§åŠå¤œä¸ç¡è¦ºåœ¨é€™é‚Šåµ"
        }
    },
    "ç‹æ°´æº": {
        fallbacks: ["åœ–ç‰‡", "å½±ç‰‡", "éƒ½å¯ä»¥å•Š", "å‡è³½å•¦", "å¹¹ä½ å¨˜æœƒè¢«ä½ å€‘å®³æ­»"],
        keywords: {
            "å˜‰æ©": "æˆ‘å…ˆä¿®ç†å¥¹ï¼Œåª½çš„æƒ³æ‰¾å€‹æ­£å¸¸äººäº¤å¾€å¥½é›£",
            "éŒ¢": "æ”¶ä¸€ä¸‹è¿ªå£«å°¼é–€ç¥¨éŒ¢ï¼Œç‚ºäº†æˆ‘çš„éŒ¢åŒ…è¬è¬",
            "ç—›è‹¦": "æˆ‘ä»Šå¤©è·Ÿæˆ‘åª½åˆ†äº«æˆ‘çš„ç—›è‹¦"
        }
    },
    "é»ƒå­åº­ Troy": {
        fallbacks: ["ç™½ç™¡", "æ“ä½ åª½", "å°ç¡¬", "Fuckable", "ç…©éƒ½ç…©æ­»"],
        keywords: {
            "æ©Ÿç¥¨": "æ”¹ä¾†æ”¹å»æ“ä»–åª½ï¼Œæµªè²»æˆ‘éŒ¢",
            "æ­£å¸¸": "ä½ ç®—å¹¸é‹äº†ï¼Œæˆ‘é€™é‚Šæ²’ä¸€å€‹æ­£å¸¸çš„",
            "è´äº†": "å¥¹å€‘è´äº†ï¼Œ18å¹´"
        }
    },
    "Gee Homie": {
        fallbacks: ["æ„›äº†", "ä¸æ„›äº†", "ä¸‰å°å•¦", "è¡Œ", "ç¬‘æ­»"],
        keywords: {
            "ç´„": "æ˜å¤©æ™šä¸Šé›†åˆï¼Œå¹¾é»åˆ°å³èˆˆè¡—ï¼Ÿ",
            "åƒå•¥": "çœ‹è¦åƒå•¥éƒ½è¡Œé™¤äº†ç«é‹",
            "è³‡æ–™": "ä¸‰åˆ†é˜ä¹‹å…§æˆ‘è¦å¨¶å¤§é™¸äººå…¨éƒ¨çš„è³‡æ–™"
        }
    }
};

let config = { mode: 'group', target: null };

function initChat() {
    const val = document.getElementById('mode').value;
    if(val === 'group') {
        config.mode = 'group';
    } else {
        config.mode = 'single';
        config.target = val.replace('single_', '');
    }
    document.getElementById('setup').style.display = 'none';
    document.getElementById('chat-container').style.display = 'flex';
    addMsg("ç³»çµ±", "å·²é€²å…¥ç¾¤çµ„å°è©±", "bot");
}

function doSend() {
    const input = document.getElementById('userInput');
    const text = input.value.trim();
    if(!text) return;

    addMsg("ä½ ", text, "user");
    input.value = "";

    // éš¨æ©Ÿå»¶é² 500ms ~ 2500ms
    const delay = 500 + Math.floor(Math.random() * 2000);
    const status = document.getElementById('status-bar');
    status.innerText = "ğŸ’¬ æœ‰äººæ­£åœ¨è¼¸å…¥...";

    setTimeout(() => {
        let name = config.mode === 'single' ? config.target : Object.keys(friends)[Math.floor(Math.random()*4)];
        let reply = getReply(name, text);
        addMsg(name, reply, "bot");
        status.innerText = config.mode === 'group' ? "æ–°åº—é¡å®¶ (4)" : `èˆ‡ ${name} å°è©±ä¸­`;
    }, delay);
}

function getReply(name, input) {
    const data = friends[name];
    const hour = new Date().getHours();

    // æ™‚æ•ˆæ€§ï¼šæ·±å¤œåŠ æˆ
    if (hour >= 1 && hour <= 6 && Math.random() > 0.5) return "å¤§åŠå¤œä¸ç¡è¦º...";

    // é—œéµå­—åŒ¹é…
    for (let key in data.keywords) {
        if (input.includes(key)) return data.keywords[key];
    }

    // éš¨æ©Ÿå›è¦†
    return data.fallbacks[Math.floor(Math.random() * data.fallbacks.length)];
}

function addMsg(sender, text, type) {
    const box = document.getElementById('messages');
    const d = document.createElement('div');
    d.className = `msg ${type}`;
    d.innerHTML = `<div class="name">${sender}</div>${text}`;
    box.appendChild(d);
    box.scrollTop = box.scrollHeight;
}
</script>
</body>
</html>